<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Tomado</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/darkly/bootstrap.min.css" rel="stylesheet" integrity="sha384-S7YMK1xjUjSpEnF4P8hPUcgjXYLZKK3fQW1j5ObLSl787II9p8RO9XUGehRmKsxd" crossorigin="anonymous">
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="center-block" style="text-align:center;">
        <h1>Tomado Timer</h1>
      </div>
    </div>
    <div class="row">
      <div class="center-block" style="width:300px;">
        <button id="pomoBtn" class="btn-primary btn-block" type="button" name="Work">Work</button>
        <button id="shortBtn" class="btn-primary btn-block" type="button" name="Short">Short</button>
        <button id="longBtn" class="btn-primary btn-block" type="button" name="Long">Long</button>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col" style="text-align:center;">
        <h2 id='timer'></h2>
      </div>
    </div>
  </div>

</body>

<script>
  var timer = document.getElementById('timer');
  var pomoBtn = document.getElementById('pomoBtn');
  var shortBtn = document.getElementById('shortBtn');
  var longBtn = document.getElementById('longBtn');
  var interval;

  function addMinutes(date, minutes) {
    return new Date(date.getTime() + minutes * 60000);
  }

  function millisToMinutesAndSeconds(millis) {
    var minutes = Math.floor(millis / 60000);
    var seconds = ((millis % 60000) / 1000).toFixed(0);
    return minutes + ":" + (seconds < 10 ? '0' : '') + seconds;
  }

  function createTimer(minutes) {
      var startTime = new Date();
      var endTime = addMinutes(startTime, minutes);
      interval = setInterval(() => {
        timer.innerHTML = millisToMinutesAndSeconds(endTime - new Date());
      },1000)
  }

  pomoBtn.addEventListener('click', (e) => {
      if (interval) {
          clearInterval(interval);
          interval = null;
      }
      createTimer(25);
  });
  shortBtn.addEventListener('click', (e) => {
      if (interval) {
          clearInterval(interval);
          interval = null;
      }
      createTimer(5);
  });
  longBtn.addEventListener('click', (e) => {
      if (interval) {
          clearInterval(interval);
          interval = null;
      }
      createTimer(10);
  });

  console.log("hello");
</script>

</html>
